const $textInput=$("#textInput"),$colorInputsContainer=$("#colorInputs"),$output=$("#output"),$textAreaOutput=$("#textAreaOutput"),copyButton=document.getElementById("copyButton");function createColorInput(t){return $("<input>").addClass("colorInput form-control form-control-color").attr("type","color").val(t)}function createRemoveButton(){return $("<button>").addClass("removeColor btn btn-danger btn-sm").html('<i class="fas fa-times"></i>').on("click",(function(){$(this).closest(".colorInputContainer").remove(),updateOutputAndResize()}))}function addColorInputToContainer(t){const o=createColorInput(t),e=createRemoveButton(),n=$("<div>").addClass("colorInputContainer position-relative d-inline-block me-2 mb-2").append(o).append(e);$colorInputsContainer.append(n),n.trigger("colorCreated")}function updateOutputAndResize(){const t=$textInput.val(),o=getColors(),e=o.length>0?applyColorsToText(t,o):{html:t,text:t};$output.html(e.html),$textAreaOutput.text(e.text),autoResizeDiv()}function copyToClipboard(){$textAreaOutput.select(),document.execCommand("copy");const t=$("#copyButton").html();$("#copyButton").html("Copied!"),setTimeout((()=>{$("#copyButton").html(t)}),2e3)}function getColors(){return $(".colorInput").map(((t,o)=>$(o).val())).get()}function applyColorsToText(t,o){const e=t.replace(/\s/g,"").length,n=chroma.scale(o).mode("lch").colors(e);let r="",u="",c=null,l=0;for(let o of t){const t=!o.trim(),e=t?c:n[l];t||l++,e===c||t||(u+=`<${e}>`,c=e),r+=`<span style="color:${e}">${o}</span>`,u+=o}return o.length>0&&u&&(u=`(ノಠ益ಠ)ノ${u}</color>`),{html:r,text:u}}function autoResizeDiv(){const t=$("#textAreaOutput");t.css("height","auto");const o=t[0].scrollHeight;t.css("height",o+"px")}function initializeDarkModeToggle(){const t=$("#darkModeToggle");window.matchMedia("(prefers-color-scheme: dark)").matches&&(toggleDarkMode(!0),t.prop("checked",!0)),t.on("change",(()=>{toggleDarkMode(t.is(":checked"))}))}function toggleDarkMode(t){$("body").toggleClass("bg-dark text-white",t)}$colorInputsContainer.on("input",".colorInput",(function(){updateOutputAndResize(),$(this).trigger("colorValueChanged")})),$colorInputsContainer.on("colorCreated",".colorInputContainer",(function(){updateOutputAndResize()})),$textInput.on("input",(function(){updateOutputAndResize(),$(this).trigger("textChanged")})),$("#addColor").on("click",(()=>addColorInputToContainer("#ffffff"))),$("#copyButton").on("click",(()=>copyToClipboard())),initializeDarkModeToggle(),addColorInputToContainer("#ff0000"),addColorInputToContainer("#0000ff"),autoResizeDiv();