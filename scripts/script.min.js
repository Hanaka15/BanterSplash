$(document).ready(function(){function t(t){return $("<input>").addClass("colorInput form-control form-control-color").attr("type","color").val(t)}function o(){return $("<button>").addClass("removeColor btn btn-danger btn-sm").html('<i class="fas fa-times"></i>').on("click",function(){$(this).closest(".colorInputContainer").remove(),c()})}function n(n){const e=t(n),c=o(),r=$("<div>").addClass("colorInputContainer position-relative d-inline-block me-2 mb-2").append(e).append(c);u.append(r),r.trigger("colorCreated")}function e(){const t=$("#textAreaOutput");t.css("height","auto");const o=t[0].scrollHeight;t.css("height",o+"px")}function c(){const t=s.val(),o=r(),n=o.length>0?l(t,o):{html:t,text:t};f.html(n.html),d.text(n.text),e()}function r(){return $(".colorInput").map((t,o)=>$(o).val()).get()}function l(t,o){const n=t.replace(/\s/g,"").length,e=chroma.scale(o).mode("lch").colors(n);let c="",r="",l=null,a=0;for(let o of t){const t=!o.trim(),n=t?l:e[a];t||a++,n===l||t||(r+=`<${n}>`,l=n),c+=`<span style="color:${n}">${o}</span>`,r+=o}return o.length>0&&r&&(r+="</color>"),{html:c,text:r}}function a(){const t=$("#darkModeToggle"),o=window.matchMedia("(prefers-color-scheme: dark)").matches;o&&(i(!0),t.prop("checked",!0)),t.on("change",()=>{i(t.is(":checked"))})}function i(t){$("body").toggleClass("bg-dark text-white",t)}const s=$("#textInput"),u=$("#colorInputs"),f=$("#output"),d=$("#textAreaOutput");u.on("input",".colorInput",function(){c(),$(this).trigger("colorValueChanged")}),u.on("colorCreated",".colorInputContainer",function(){c()}),s.on("input",function(){c(),$(this).trigger("textChanged")}),$("#addColor").on("click",()=>n("#ffffff")),n("#ff0000"),n("#0000ff"),e(),a()});